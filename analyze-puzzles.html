<!DOCTYPE html>
<html>
<head>
    <title>Analyze Puzzles</title>
    <script src="words.js"></script>
    <script src="common-words.js"></script>
    <script src="common-definitions.js"></script>
    <script src="seed-words.js"></script>
</head>
<body>
    <h1>Analyzing Puzzles...</h1>
    <pre id="output"></pre>
    
    <script>
        const CROSS_POSITIONS = [1, 2, 4, 5, 6, 7, 8, 9, 10, 11, 13, 14];
        const HAMILTONIAN_PATHS = [
            [1, 5, 4, 8, 9, 13, 14, 10, 6, 2, 7, 11],
            [4, 5, 9, 8, 13, 14, 11, 7, 6, 10, 2, 1],
            [1, 2, 7, 11, 14, 13, 8, 4, 5, 6, 10, 9],
            [5, 1, 2, 6, 10, 14, 13, 9, 8, 4, 7, 11],
            [11, 7, 2, 1, 5, 9, 13, 14, 10, 6, 4, 8],
            [8, 4, 5, 1, 6, 2, 7, 11, 14, 10, 9, 13],
            [9, 5, 4, 8, 13, 14, 10, 6, 1, 2, 7, 11],
            [14, 13, 9, 10, 11, 7, 6, 2, 1, 5, 4, 8],
            [2, 1, 4, 5, 9, 8, 13, 14, 11, 10, 6, 7],
            [7, 11, 10, 14, 9, 13, 8, 4, 5, 1, 2, 6]
        ];
        
        const SAMPLE_PUZZLES = {
            "CORNERSTONES": { seedWord: "CORNERSTONES", pathIndex: 0 },
            "ARCHITECTURE": { seedWord: "ARCHITECTURE", pathIndex: 1 },
            "EXPERIMENTAL": { seedWord: "EXPERIMENTAL", pathIndex: 2 },
            "TECHNOLOGIES": { seedWord: "TECHNOLOGIES", pathIndex: 3 },
            "CHAMPIONSHIP": { seedWord: "CHAMPIONSHIP", pathIndex: 4 },
            "INTELLIGENCE": { seedWord: "INTELLIGENCE", pathIndex: 5 },
            "NEIGHBORHOOD": { seedWord: "NEIGHBORHOOD", pathIndex: 6 },
            "THANKSGIVING": { seedWord: "THANKSGIVING", pathIndex: 7 },
            "ENCYCLOPEDIA": { seedWord: "ENCYCLOPEDIA", pathIndex: 8 },
            "BREAKTHROUGH": { seedWord: "BREAKTHROUGH", pathIndex: 9 }
        };
        
        const ADJACENCY = {
            1: [2, 4, 5, 6],
            2: [1, 5, 6, 7],
            4: [1, 5, 8, 9],
            5: [1, 2, 4, 6, 8, 9, 10],
            6: [1, 2, 5, 7, 9, 10, 11],
            7: [2, 6, 10, 11],
            8: [4, 5, 9, 13],
            9: [4, 5, 6, 8, 10, 13, 14],
            10: [5, 6, 7, 9, 11, 13, 14],
            11: [6, 7, 10, 14],
            13: [8, 9, 10, 14],
            14: [9, 10, 11, 13]
        };
        
        async function analyzePuzzles() {
            const output = document.getElementById('output');
            let text = '';
            
            await window.wordValidator.initialize();
            
            const allCornerstoneWords = new Set();
            const needsDefinition = new Set();
            
            for (const [name, puzzle] of Object.entries(SAMPLE_PUZZLES)) {
                text += `\nAnalyzing ${name}...\n`;
                
                // Generate grid
                const grid = new Array(16).fill('');
                const path = HAMILTONIAN_PATHS[puzzle.pathIndex];
                const letters = puzzle.seedWord.split('');
                path.forEach((position, index) => {
                    grid[position] = letters[index];
                });
                
                // Find all words
                const foundWords = new Set();
                const cornerstoneWords = new Set();
                
                function dfsWordSearch(position, currentWord, visited) {
                    visited[position] = true;
                    const newWord = currentWord + grid[position];
                    
                    if (newWord.length >= 4 && window.wordValidator.isValidWord(newWord)) {
                        const upperWord = newWord.toUpperCase();
                        foundWords.add(upperWord);
                        if (COMMON_WORDS_SET.has(newWord.toLowerCase()) || upperWord === puzzle.seedWord) {
                            cornerstoneWords.add(upperWord);
                        }
                    }
                    
                    if (newWord.length <= 12) {
                        const neighbors = ADJACENCY[position] || [];
                        neighbors.forEach(neighbor => {
                            if (!visited[neighbor] && grid[neighbor]) {
                                dfsWordSearch(neighbor, newWord, visited.slice());
                            }
                        });
                    }
                }
                
                CROSS_POSITIONS.forEach(startPos => {
                    const visited = new Array(16).fill(false);
                    dfsWordSearch(startPos, '', visited);
                });
                
                text += `Found ${cornerstoneWords.size} cornerstone words\n`;
                
                // Check definitions
                cornerstoneWords.forEach(word => {
                    allCornerstoneWords.add(word);
                    const def = getDefinition(word);
                    if (def === 'A common English word') {
                        needsDefinition.add(word);
                    }
                });
            }
            
            text += '\n=== SUMMARY ===\n';
            text += `Total unique cornerstone words: ${allCornerstoneWords.size}\n`;
            text += `Words needing definitions: ${needsDefinition.size}\n`;
            
            if (needsDefinition.size > 0) {
                text += '\n=== WORDS NEEDING DEFINITIONS ===\n';
                const sortedWords = Array.from(needsDefinition).sort();
                sortedWords.forEach(word => {
                    text += word + '\n';
                });
            }
            
            output.textContent = text;
        }
        
        analyzePuzzles();
    </script>
</body>
</html>